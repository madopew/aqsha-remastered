(this.webpackJsonpaqsha=this.webpackJsonpaqsha||[]).push([[0],{16:function(e,n,t){},17:function(e,n,t){},21:function(e,n,t){},52:function(e,n,t){},53:function(e,n,t){},54:function(e,n,t){},55:function(e,n,t){},56:function(e,n,t){"use strict";t.r(n);var o,c=t(1),i=t(3),a=t.n(i),r=t(2),s=(t(16),t(58)),l=(t(17),t(0));function u(e){var n=e.children,t=e.visible,c=e.effect;return Object(l.jsx)(s.a,{in:t,timeout:200,classNames:"appear-transition-"+o[c],unmountOnExit:!0,children:n})}!function(e){e[e.bottomToTop=0]="bottomToTop",e[e.fadeIn=1]="fadeIn"}(o||(o={}));t(21);var d=t(6);function j(e){var n=e.total,t=e.today,o=e.onAdd,i=e.onWithdraw,a=Object(c.useState)(t<0?1:0),s=Object(r.a)(a,2),u=s[0],j=s[1];return Object(c.useEffect)((function(){j(t<0?1:0)}),[t]),Object(l.jsxs)("div",{className:"balance-container",children:[Object(l.jsx)("div",{className:"balance-positive"}),Object(l.jsx)("div",{className:"balance-negative",style:{opacity:u}}),Object(l.jsxs)("div",{className:"balance-indicator",children:[Object(l.jsx)("h2",{children:"Total Balance"}),Object(l.jsxs)("h3",{children:[Object(l.jsx)(d.a,{value:n,decimals:2})," ",Object(l.jsx)("span",{children:"BYR"})]})]}),Object(l.jsxs)("div",{className:"balance-indicator",children:[Object(l.jsx)("h2",{children:"Today Balance"}),Object(l.jsxs)("h3",{children:[Object(l.jsx)(d.a,{value:t,decimals:2})," ",Object(l.jsx)("span",{children:"BYR"})]})]}),Object(l.jsxs)("div",{className:"balance-buttons",children:[Object(l.jsxs)("button",{onTouchEnd:function(){return o()},children:[Object(l.jsx)("span",{className:"material-icons-outlined",children:"add_circle"})," ","Add"]}),Object(l.jsx)("div",{className:"balance-buttons-separator"}),Object(l.jsxs)("button",{onTouchEnd:function(){return i()},children:[Object(l.jsx)("span",{className:"material-icons-outlined",children:"remove_circle"})," ","Out"]})]})]})}t(52);var b={title:"Title",text:"Text",firstButtonText:"First",secondButtonText:"Second",showCancelButton:!0,onFirst:null,onSecond:null,onCancel:null};function h(e){var n=e.options,t=n.title,o=n.text,c=n.firstButtonText,i=n.secondButtonText,a=n.showCancelButton,r=n.onFirst,s=n.onSecond,u=n.onCancel;return Object(l.jsx)("div",{className:"dialog-outer-container",children:Object(l.jsxs)("div",{className:"dialog-container",children:[Object(l.jsx)("h1",{children:t}),o&&Object(l.jsx)("p",{children:o}),Object(l.jsxs)("div",{className:"dialog-buttons",children:[c&&Object(l.jsx)("button",{onClick:function(e){return r&&r()},children:c}),i&&Object(l.jsx)("button",{onClick:function(e){return s&&s()},children:i}),a&&Object(l.jsx)("button",{onClick:function(e){return u&&u()},children:"Cancel"})]})]})})}t(53);function f(e){var n=e.onCancel,t=e.onSuccess,o=Object(c.useState)(0),i=Object(r.a)(o,2),a=i[0],s=i[1],u=function(e){switch(e){case"-":0===a?n():s(Math.floor(a/10));break;case"+":t(a/100);break;default:s(10*a+parseInt(e))}};return Object(l.jsx)("div",{className:"numpad-outer-container",children:Object(l.jsxs)("div",{className:"numpad-inner-container",children:[Object(l.jsx)("div",{className:"numpad-value-container",children:Object(l.jsxs)("div",{className:"numpad-value-container-inner",children:[(a/100).toFixed(2),Object(l.jsx)("span",{children:"BYR"})]})}),Object(l.jsxs)("div",{className:"numpad-numpad",children:[Object(l.jsxs)("div",{className:"numpad-row",children:[Object(l.jsx)("button",{onClick:function(e){return u("1")},children:"1"}),Object(l.jsx)("button",{onClick:function(e){return u("2")},children:"2"}),Object(l.jsx)("button",{onClick:function(e){return u("3")},children:"3"})]}),Object(l.jsxs)("div",{className:"numpad-row",children:[Object(l.jsx)("button",{onClick:function(e){return u("4")},children:"4"}),Object(l.jsx)("button",{onClick:function(e){return u("5")},children:"5"}),Object(l.jsx)("button",{onClick:function(e){return u("6")},children:"6"})]}),Object(l.jsxs)("div",{className:"numpad-row",children:[Object(l.jsx)("button",{onClick:function(e){return u("7")},children:"7"}),Object(l.jsx)("button",{onClick:function(e){return u("8")},children:"8"}),Object(l.jsx)("button",{onClick:function(e){return u("9")},children:"9"})]}),Object(l.jsxs)("div",{className:"numpad-row",children:[Object(l.jsx)("button",{onClick:function(e){return u("-")},children:Object(l.jsx)("span",{className:"material-icons-outlined",children:"arrow_back"})}),Object(l.jsx)("button",{onClick:function(e){return u("0")},children:"0"}),Object(l.jsx)("button",{onClick:function(e){return u("+")},children:Object(l.jsx)("span",{className:"material-icons-outlined",children:"done"})})]})]})]})})}var p=function(e,n,t){var o=Object(c.useRef)();Object(c.useEffect)((function(){var c=(null===t||void 0===t?void 0:t.current)||window;if(c&&c.addEventListener){o.current!==n&&(o.current=n);var i=function(e){(null===o||void 0===o?void 0:o.current)&&o.current(e)};return c.addEventListener(e,i),function(){c.removeEventListener(e,i)}}}),[e,t,n])};var v,O=function(e,n){var t=function(){if("undefined"===typeof window)return n;try{var t=window.localStorage.getItem(e);return null!==t?JSON.parse(t):(window.localStorage.setItem(e,JSON.stringify(n)),n)}catch(o){return console.warn("Error reading localStorage key \u201c".concat(e,"\u201d:"),o),n}},o=Object(c.useState)(t),i=Object(r.a)(o,2),a=i[0],s=i[1];return Object(c.useEffect)((function(){s(t())}),[]),Object(c.useEffect)((function(){var e=function(){s(t())};return window.addEventListener("storage",e),window.addEventListener("local-storage",e),function(){window.removeEventListener("storage",e),window.removeEventListener("local-storage",e)}}),[]),[a,function(n){"undefined"==typeof window&&console.warn("Tried setting localStorage key \u201c".concat(e,"\u201d even though environment is not a client"));try{var t=n instanceof Function?n(a):n;window.localStorage.setItem(e,JSON.stringify(t)),s(t),window.dispatchEvent(new Event("local-storage"))}catch(o){console.warn("Error setting localStorage key \u201c".concat(e,"\u201d:"),o)}}]};function x(){return(new Date).setHours(0,0,0,0)}function m(e){var n=function(){if(x()>y){var e=(x()-y)/864e5,n=h*e+u;d(i-n>-.001?n:i),g(x())}},t=O("total_balance",0),o=Object(r.a)(t,2),i=o[0],a=o[1],s=O("today_balance",0),l=Object(r.a)(s,2),u=l[0],d=l[1],j=O("daily_balance",0),b=Object(r.a)(j,2),h=b[0],f=b[1],m=O("last_updated",x()),w=Object(r.a)(m,2),y=w[0],g=w[1];Object(c.useEffect)((function(){n()}),[]),p("focus",(function(e){n()}));var N=O("history",[]),C=Object(r.a)(N,2),k=C[0],E=C[1],T=O("undos",[]),S=Object(r.a)(T,2),B=S[0],I=S[1],F=function(n,t){B.push({total:i,today:u,daily:h}),I(B);var o=k.slice(0);k.length>=e&&(o=k.slice(k.length-e+1)),o.unshift({time:new Date,type:n,amount:t}),E(o)};return[i,function(e){F(v.update,e);var n=e/function(){var e=new Date;return new Date(e.getUTCFullYear(),e.getUTCMonth(),0).getDate()}();g(x()),f(n),d(n),a(e)},u,function(e){F(v.add,e),a(i+e),d(u+e)},function(e){return i-e>-.001&&(F(v.withdraw,e),d(u-e),a(Math.abs(i-e)),!0)},k,function(){if(B.length>0){k.shift(),E(k);var e=B.pop();if(void 0===e)throw new Error("Undo operation is undefined");I(B),a(e.total),d(e.today),f(e.daily)}},function(e,n,t){a(e),d(n),f(t),E([]),I([]),g(x())}]}!function(e){e[e.update=0]="update",e[e.add=1]="add",e[e.withdraw=2]="withdraw"}(v||(v={}));var w,y,g,N=t(7);function C(e,n){switch(n.type){case w.openChoose:return{visible:!0,options:{title:n.info.title,text:n.info.text,firstButtonText:"Add",secondButtonText:"Update",showCancelButton:!0,onFirst:function(){n.add(n.payload),n.close()},onSecond:function(){n.update(n.payload),n.close()},onCancel:function(){return n.close()}}};case w.openInfo:return{visible:!0,options:{title:n.info.title,text:n.info.text,firstButtonText:null,secondButtonText:null,showCancelButton:!0,onFirst:null,onSecond:null,onCancel:function(){return n.close()}}};case w.hide:return Object(N.a)(Object(N.a)({},e),{},{visible:!1})}}function k(e,n){switch(n.type){case y.open:return{visible:!0,operation:n.payload};case y.close:switch(e.operation){case g.unknown:n.onChoose(n.payload);break;case g.withdraw:n.withdraw(n.payload)||n.onError();break;default:throw Error("Invalid numpad close "+g[e.operation])}return{visible:!1,operation:g.none};case y.hide:return{visible:!1,operation:g.none}}}!function(e){e[e.openChoose=0]="openChoose",e[e.openInfo=1]="openInfo",e[e.hide=2]="hide"}(w||(w={})),function(e){e[e.open=0]="open",e[e.close=1]="close",e[e.hide=2]="hide"}(y||(y={})),function(e){e[e.withdraw=0]="withdraw",e[e.unknown=1]="unknown",e[e.none=2]="none"}(g||(g={}));var E=t(10),T=t.n(E),S=(t(54),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),B=["","+","-"];function I(e){var n=e.history,t=e.undo;return Object(l.jsx)("div",{className:"history-container",children:n.map((function(e,n){var o=new Date(e.time);return Object(l.jsxs)("div",{onTouchEnd:function(){0===n&&t()},className:"history-operation",children:[Object(l.jsxs)("span",{className:"operation-time",children:[o.getDate()," ",S[o.getMonth()],","," ",o.getHours(),":",o.getMinutes()]}),Object(l.jsxs)("span",{className:"operation-amount operation-"+v[e.type],children:[B[e.type],e.amount.toFixed(2)]})]},T()())}))})}var F=function(){var e=m(10),n=Object(r.a)(e,8),t=n[0],i=n[1],a=n[2],s=n[3],d=n[4],p=n[5],v=n[6],O=n[7],x=Object(c.useReducer)(k,{visible:!1,operation:g.none}),N=Object(r.a)(x,2),E=N[0],T=N[1],S=Object(c.useReducer)(C,{visible:!1,options:b}),B=Object(r.a)(S,2),F=B[0],D=B[1];return Object(l.jsxs)("div",{className:"root-main",children:[Object(l.jsx)("div",{className:"root-top",children:Object(l.jsx)(u,{visible:E.visible,effect:o.bottomToTop,children:Object(l.jsx)(f,{onSuccess:function(e){T({type:y.close,payload:e,withdraw:d,onChoose:function(e){return D({type:w.openChoose,payload:e,info:{title:"Balance added.",text:"Do you want to add extra income or update monthly budget?"},add:s,update:i,close:function(){return D({type:w.hide})}})},onError:function(){return D({type:w.openInfo,info:{title:"You don't have enough balance.",text:"Please make sure you have chosen either right amount or operation."},close:function(){return D({type:w.hide})}})}})},onCancel:function(){return T({type:y.hide})}})})}),Object(l.jsx)("div",{className:"root-top",children:Object(l.jsx)(u,{visible:F.visible,effect:o.fadeIn,children:Object(l.jsx)(h,{options:F.options})})}),Object(l.jsxs)("div",{className:"root-balance",children:[Object(l.jsx)("button",{className:"secret",onTouchEnd:function(){console.log(1);var e=prompt();if(null!=e){var n=e.split(" ");O(parseInt(n[0]),parseInt(n[1]),parseInt(n[2]))}},children:"reset"}),Object(l.jsx)(j,{total:t,today:a,onAdd:function(){T({type:y.open,payload:g.unknown})},onWithdraw:function(){T({type:y.open,payload:g.withdraw})}})]}),Object(l.jsx)("div",{className:"root-history",children:Object(l.jsx)(I,{history:p,undo:v})})]})};t(55);a.a.render(Object(l.jsx)(F,{}),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.6e421021.chunk.js.map